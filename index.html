<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>H2 TechService Rechnung</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
@media print {
  .no-print { display: none !important; }
}
textarea {
  min-height: 100px;
  resize: vertical;
}
input.qty {
  width: 80px;
}
</style>
</head>

<body class="bg-gray-100 p-4">
<div id="invoice" class="max-w-3xl mx-auto bg-white p-6 shadow">

<h1 class="text-2xl font-bold mb-4 text-center">Rechnung</h1>

<p class="font-bold">H2 TechService</p>
<p>Inhaber: Osman Tuncer</p>
<p>Suntal Str. 48, 31552 Rodenberg</p>
<p>Tel: +49 176 66658777</p>
<p>E-Mail: 74star@gmail.com</p>
<p>IBAN: LT83 2500 9251 8928 659</p>
<p>BIC: REVOLT21</p>

<hr class="my-4">

<div class="grid grid-cols-2 gap-4">
<div>
<label>Kunde:</label>
<input id="kunde" class="border w-full p-1">
</div>
<div>
<label>Rechnungsnr:</label>
<div id="rnr" class="font-mono"></div>
</div>

<div>
Datum: <span id="datum"></span>
</div>
<div>
FÃ¤llig: <span id="faellig"></span>
</div>
</div>

<table class="w-full mt-4 border">
<thead class="bg-gray-200">
<tr>
<th>Beschreibung</th>
<th>Menge</th>
<th>Preis â‚¬</th>
<th>Gesamt â‚¬</th>
</tr>
</thead>
<tbody>
<tr>
<td><textarea id="desc"></textarea></td>
<td><input type="number" class="qty" id="qty" value="1" min="1" max="10000"></td>
<td><input type="number" id="price" value="0"></td>
<td id="rowtotal">0.00</td>
</tr>
</tbody>
</table>

<div class="text-right mt-4">
<p>Zwischensumme: <span id="sub">0.00</span> â‚¬</p>
<p>MwSt 19%: <span id="vat">0.00</span> â‚¬</p>
<p class="font-bold text-lg">Gesamt: <span id="total">0.00</span> â‚¬</p>
</div>

<div class="flex gap-2 mt-6 no-print">
<button onclick="saveInvoice()" class="border p-2">ðŸ’¾ Speichern</button>
<button onclick="clearInvoice()" class="border p-2">ðŸ—‘ LÃ¶schen</button>
<button onclick="makePDF()" class="border p-2">ðŸ“„ PDF</button>
<button onclick="sendEmail()" class="border p-2">âœ‰ Email</button>
<button onclick="sendWhats()" class="border p-2">ðŸ“± WhatsApp</button>
</div>

</div>

<script>
const today = new Date();
document.getElementById("datum").innerText = today.toLocaleDateString();
const due = new Date(today); due.setDate(today.getDate()+14);
document.getElementById("faellig").innerText = due.toLocaleDateString();

document.getElementById("rnr").innerText = "H2-" + Date.now();

function calc(){
 let q = qty.value || 0;
 let p = price.value || 0;
 let sum = q*p;
 rowtotal.innerText = sum.toFixed(2);
 sub.innerText = sum.toFixed(2);
 let v = sum*0.19;
 vat.innerText = v.toFixed(2);
 total.innerText = (sum+v).toFixed(2);
}
qty.oninput = price.oninput = calc;
calc();

function makePDF(){
 html2pdf().from(invoice).save("Rechnung.pdf");
}

function sendEmail(){
 location.href="mailto:?subject=Rechnung&body=Rechnung im Anhang";
}

function sendWhats(){
 window.open("https://wa.me/?text=Meine Rechnung");
}

function saveInvoice(){
 localStorage.setItem("invoice", invoice.innerHTML);
 alert("Gespeichert (nur Admin)");
}

function clearInvoice(){
 if(confirm("LÃ¶schen?")){
  localStorage.removeItem("invoice");
  location.reload();
 }
}
</script>

</body>
</html>
