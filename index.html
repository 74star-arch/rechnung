<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>H2 TechService Rechnung</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@media print {
.no-print { display:none !important }
body { background:white }
.card { box-shadow:none; margin:0; width:100% }
}
textarea.desc { min-height:80px; }
</style>
</head>

<body class="bg-slate-100 pb-20">

<div class="card max-w-4xl mx-auto bg-white mt-6 rounded shadow">

<!-- HEADER -->
<div class="bg-blue-900 text-white p-6 flex justify-between">
<div>
<h1 class="text-2xl font-black">H2 TechService</h1>
<p>Osman Tuncer</p>
<p>Tel: +49 176 66658777</p>
<p>Mail: 74star@gmail.com</p>
</div>
<div class="text-right">
<h2 class="text-xl opacity-70">RECHNUNG</h2>
<div id="inv"></div>
</div>
</div>

<!-- EMPFÃ„NGER -->
<div class="p-6 grid grid-cols-2 gap-6 text-sm">
<div>
<b>EmpfÃ¤nger</b>

<select id="customerSelect" class="w-full p-2 bg-slate-100 mb-2 no-print"
onchange="loadCustomer()"></select>

<textarea id="customerData" class="w-full p-2 bg-slate-100"
placeholder="Kundendaten"></textarea>

<div class="no-print mt-2 flex gap-2">
<button onclick="saveCustomer()" class="text-blue-600 text-xs">ðŸ’¾ speichern</button>
<button onclick="deleteCustomer()" class="text-red-600 text-xs">ðŸ—‘ lÃ¶schen</button>
</div>
</div>

<div class="text-right">
Datum: <input type="date" id="date"><br>
FÃ¤llig: <input type="date" id="due">
</div>
</div>

<!-- POSITIONEN -->
<div class="p-6">
<table class="w-full text-sm">
<thead>
<tr class="border-b">
<th>Beschreibung</th>
<th class="w-24">Menge</th>
<th class="w-24">Preis</th>
<th class="w-24">Gesamt</th>
</tr>
</thead>
<tbody id="rows">
<tr>
<td><textarea class="desc w-full" oninput="upd()"></textarea></td>
<td><input type="number" min="1" max="10000" value="1" class="qty w-full" oninput="upd()"></td>
<td><input type="number" class="price w-full" oninput="upd()"></td>
<td class="row-total text-right">0.00 â‚¬</td>
</tr>
</tbody>
</table>

<button onclick="add()" class="no-print text-blue-600 mt-2">+ Position</button>
</div>

<!-- SUMMEN -->
<div class="p-6 bg-slate-50 grid grid-cols-2">
<div>
<p>IBAN: LT83 2500 9251 8928 659</p>
<p>BIC: Revolut21</p>
</div>
<div>
<div class="flex justify-between"><span>Netto</span><span id="sub">0.00 â‚¬</span></div>
<div class="flex justify-between"><span>MwSt 19%</span><span id="tax">0.00 â‚¬</span></div>
<div class="flex justify-between font-bold text-xl border-t mt-2 pt-2">
<span>GESAMT</span><span id="total">0.00 â‚¬</span>
</div>
</div>
</div>

<!-- ADMIN BUTTONS -->
<div class="no-print fixed bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
<button onclick="window.print()" class="bg-blue-600 text-white px-4 py-2 rounded">PDF</button>
<button onclick="shareMail()">E-Mail</button>
<button onclick="shareWhatsApp()">WhatsApp</button>
<button onclick="shareTelegram()">Telegram</button>
</div>

</div>

<script>
// Rechnungsnummer
let n = localStorage.getItem("inv") || 0;
n++; localStorage.setItem("inv", n);
inv.innerText = "RE-" + new Date().getFullYear() + "-" + String(n).padStart(3,"0");

// Datum
date.valueAsDate = new Date();
let d = new Date(); d.setDate(d.getDate()+14);
due.valueAsDate = d;

// Positionen
const VAT = 0.19;
function add(){
rows.insertAdjacentHTML("beforeend",`
<tr>
<td><textarea class="desc w-full" oninput="upd()"></textarea></td>
<td><input type="number" min="1" max="10000" value="1" class="qty w-full" oninput="upd()"></td>
<td><input type="number" class="price w-full" oninput="upd()"></td>
<td class="row-total text-right">0.00 â‚¬</td>
</tr>`);
}
function upd(){
let s=0;
document.querySelectorAll("#rows tr").forEach(r=>{
let q=r.querySelector(".qty").value||0;
let p=r.querySelector(".price").value||0;
let t=q*p; s+=t;
r.querySelector(".row-total").innerText=t.toFixed(2)+" â‚¬";
});
sub.innerText=s.toFixed(2)+" â‚¬";
tax.innerText=(s*VAT).toFixed(2)+" â‚¬";
total.innerText=(s*1.19).toFixed(2)+" â‚¬";
}

// Kunden
let customers = JSON.parse(localStorage.getItem("cust")||"[]");
function refresh(){
customerSelect.innerHTML="<option>Kunde wÃ¤hlen</option>";
customers.forEach((c,i)=>{
customerSelect.innerHTML+=`<option value="${i}">${c.split("\n")[0]}</option>`;
});
}
function saveCustomer(){
customers.push(customerData.value);
localStorage.setItem("cust",JSON.stringify(customers));
refresh();
}
function loadCustomer(){
let i=customerSelect.value;
if(customers[i]) customerData.value=customers[i];
}
function deleteCustomer(){
customers.splice(customerSelect.value,1);
localStorage.setItem("cust",JSON.stringify(customers));
refresh(); customerData.value="";
}
refresh();

// Teilen
function shareMail(){
location.href=`mailto:?subject=Rechnung&body=Rechnung von H2 TechService`;
}
function shareWhatsApp(){
window.open("https://wa.me/?text=Rechnung von H2 TechService");
}
function shareTelegram(){
window.open("https://t.me/share/url?text=Rechnung von H2 TechService");
}
</script>

</body>
</html>
